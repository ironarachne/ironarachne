import{s as _}from"./index.f8fc1700.js";class w{_seed(t,e){if(t===(t||0))return t;{const r=""+t;let i=0;for(let s=0;s<r.length;++s)i^=r.charCodeAt(s)|0;return i}}}class f extends w{constructor(t,e){super(),this.seed(t,e)}get name(){return"function"}next(){return this._rng()}seed(t,e){this._rng=t}clone(t,e){return new f(this._rng,e)}}const M=(...n)=>{const[t="default",...e]=n;switch(typeof t){case"object":if(t instanceof w)return t;break;case"function":return new f(t);case"number":case"string":return new f(_(...e))}throw new Error(`invalid RNG "${t}"`)},d=(n,t=0,e=1)=>()=>n.next()*(e-t)+t;function h(n){return new b(n)}class b{constructor(t){this.isInt=()=>{if(Number.isInteger(this.n))return this;throw new Error(`Expected number to be an integer, got ${this.n}`)},this.isPositive=()=>{if(this.n>0)return this;throw new Error(`Expected number to be positive, got ${this.n}`)},this.lessThan=e=>{if(this.n<e)return this;throw new Error(`Expected number to be less than ${e}, got ${this.n}`)},this.greaterThanOrEqual=e=>{if(this.n>=e)return this;throw new Error(`Expected number to be greater than or equal to ${e}, got ${this.n}`)},this.greaterThan=e=>{if(this.n>e)return this;throw new Error(`Expected number to be greater than ${e}, got ${this.n}`)},this.n=t}}const E=(n,t=0,e=1)=>(e===void 0&&(e=t===void 0?1:t,t=0),h(t).isInt(),h(e).isInt(),()=>Math.floor(n.next()*(e-t+1)+t)),I=n=>()=>n.next()>=.5,v=(n,t=0,e=1)=>()=>{let r,i,s;do r=n.next()*2-1,i=n.next()*2-1,s=r*r+i*i;while(!s||s>1);return t+e*i*Math.sqrt(-2*Math.log(s)/s)},T=(n,t=0,e=1)=>{const r=n.normal(t,e);return()=>Math.exp(r())},$=(n,t=.5)=>(h(t).greaterThanOrEqual(0).lessThan(1),()=>Math.floor(n.next()+t)),q=(n,t=1,e=.5)=>(h(t).isInt().isPositive(),h(e).greaterThanOrEqual(0).lessThan(1),()=>{let r=0,i=0;for(;r++<t;)n.next()<e&&i++;return i}),N=(n,t=.5)=>{h(t).greaterThan(0).lessThan(1);const e=1/Math.log(1-t);return()=>Math.floor(1+Math.log(n.next())*e)},P=[0,0,.6931471805599453,1.791759469228055,3.1780538303479458,4.787491742782046,6.579251212010101,8.525161361065415,10.60460290274525,12.801827480081469],y=n=>P[n],k=.9189385332046727,B=(n,t=1)=>{if(h(t).isPositive(),t<10){const e=Math.exp(-t);return()=>{let r=e,i=0,s=n.next();for(;s>r;)s=s-r,r=t*r/++i;return i}}else{const e=Math.sqrt(t),r=.931+2.53*e,i=-.059+.02483*r,s=1.1239+1.1328/(r-3.4),l=.9277-3.6224/(r-2);return()=>{for(var x;;){let u,a=n.next();if(a<=.86*l)return u=a/l-.43,Math.floor((2*i/(.5-Math.abs(u))+r)*u+t+.445);a>=l?u=n.next()-.5:(u=a/l-.93,u=(u<0?-.5:.5)-u,a=n.next()*l);const c=.5-Math.abs(u);if(c<.013&&a>c)continue;const o=Math.floor((2*i/c+r)*u+t+.445);if(a=a*s/(i/(c*c)+r),o>=10){const m=(o+.5)*Math.log(t/o)-t-k+o-(.08333333333333333-(.002777777777777778-1/(1260*o*o))/(o*o))/o;if(Math.log(a*e)<=m)return o}else if(o>=0){const m=(x=y(o))!==null&&x!==void 0?x:0;if(Math.log(a)<=o*Math.log(t)-t-m)return o}}}}},O=(n,t=1)=>(h(t).isPositive(),()=>-Math.log(1-n.next())/t),z=(n,t=1)=>(h(t).isInt().greaterThanOrEqual(0),()=>{let e=0;for(let r=0;r<t;++r)e+=n.next();return e}),H=(n,t=1)=>{h(t).isInt().isPositive();const e=n.irwinHall(t);return()=>e()/t},A=(n,t=1)=>{h(t).greaterThanOrEqual(0);const e=1/t;return()=>1/Math.pow(1-n.next(),e)};class p extends w{get name(){return"default"}next(){return Math.random()}seed(t,e){}clone(){return new p}}class g{constructor(t){this._cache={},this.next=()=>this._rng.next(),this.float=(e,r)=>this.uniform(e,r)(),this.int=(e,r)=>this.uniformInt(e,r)(),this.integer=(e,r)=>this.uniformInt(e,r)(),this.bool=()=>this.uniformBoolean()(),this.boolean=()=>this.uniformBoolean()(),this.uniform=(e,r)=>this._memoize("uniform",d,e,r),this.uniformInt=(e,r)=>this._memoize("uniformInt",E,e,r),this.uniformBoolean=()=>this._memoize("uniformBoolean",I),this.normal=(e,r)=>v(this,e,r),this.logNormal=(e,r)=>T(this,e,r),this.bernoulli=e=>$(this,e),this.binomial=(e,r)=>q(this,e,r),this.geometric=e=>N(this,e),this.poisson=e=>B(this,e),this.exponential=e=>O(this,e),this.irwinHall=e=>z(this,e),this.bates=e=>H(this,e),this.pareto=e=>A(this,e),t&&t instanceof w?this.use(t):this.use(new p),this._cache={}}get rng(){return this._rng}clone(...t){return t.length?new g(M(...t)):new g(this.rng.clone())}use(...t){this._rng=M(...t)}patch(){if(this._patch)throw new Error("Math.random already patched");this._patch=Math.random,Math.random=this.uniform()}unpatch(){this._patch&&(Math.random=this._patch,delete this._patch)}_memoize(t,e,...r){const i=`${r.join(";")}`;let s=this._cache[t];return(s===void 0||s.key!==i)&&(s={key:i,distribution:e(this,...r)},this._cache[t]=s),s.distribution}}const G=new g;export{G as r};
//# sourceMappingURL=random.e4ec5faf.js.map

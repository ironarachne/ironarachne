{"version":3,"file":"_page.svelte-23536274.js","sources":["../../../../src/routes/fantasy/merchant/+page.svelte","../../../../src/lib/merchant.ts","../../../../src/lib/equipment/stocklist.ts","../../../../src/lib/equipment/equipment.ts"],"sourcesContent":["<script lang=\"ts\">\n  import * as Currency from \"$lib/currency\";\n  import * as Merchant from \"$lib/merchant\";\n  import * as RND from \"@ironarachne/rng\";\n  import * as Words from \"@ironarachne/words\";\n  import random from \"random\";\n  import seedrandom from \"seedrandom\";\n\n  let category = 'general';\n  let valueThreshold = 50;\n  let categories = [\n    'armor',\n    'clothing',\n    'general',\n    'weapon',\n  ];\n  let merchant = Merchant.generate(category, valueThreshold);\n  let seed = RND.randomString(13);\n\n  function generate() {\n    random.use(seedrandom(seed));\n\n    merchant = Merchant.generate(category, valueThreshold);\n  }\n\n  function newSeed() {\n    seed = RND.randomString(13);\n    generate();\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"$lib/styles/reset.scss\";\n  @import \"$lib/styles/main.scss\";\n  @import '$lib/styles/global.scss';\n  @import '$lib/styles/fantasy.scss';\n</style>\n\n<svelte:head>\n  <title>Fantasy Merchant Generator | Iron Arachne</title>\n</svelte:head>\n\n<section class=\"fantasy main\">\n  <h1>Fantasy Merchant Generator</h1>\n\n  <p>This generates a fantasy merchant and a list of their wares.</p>\n\n  <div class=\"input-group\">\n    <label for=\"seed\">Random Seed</label>\n    <input type=\"text\" name=\"seed\" bind:value={seed} id=\"seed\"/>\n  </div>\n\n  <div class=\"input-group\">\n    <label for=\"value\">Material Rarity Threshold</label>\n    <select name=\"value\" bind:value={valueThreshold}>\n      <option value=\"50\">Common</option>\n      <option value=\"100\">Rare</option>\n      <option value=\"10000\">Legendary</option>\n    </select>\n  </div>\n\n  <div class=\"input-group\">\n    <label for=\"value\">Type of Goods</label>\n    <select name=\"value\" bind:value={category}>\n      {#each categories as cat}\n      <option>{cat}</option>\n      {/each}\n    </select>\n  </div>\n\n  <button on:click={generate}>Generate From Seed</button>\n  <button on:click={newSeed}>Random Seed (and Generate)</button>\n\n  <p>{ merchant.description } { Words.capitalize(merchant.character.gender.possessivePronoun) } wares include:</p>\n\n  <h2>Stock List</h2>\n\n  {#each merchant.wares as item}\n    <h4>{Words.capitalize(item.name)}</h4>\n    <p>{Words.capitalize(item.description)}.</p>\n    <p><strong>Cost:</strong> {Currency.convertCopper(Math.floor(item.value * merchant.priceVariance), false, false, false)}</p>\n  {/each}\n</section>\n","\"use strict\";\n\nimport * as RND from \"@ironarachne/rng\";\nimport * as Words from \"@ironarachne/words\";\nimport random from \"random\";\nimport Character from \"./characters/character.js\";\nimport CharacterGenerator from \"./characters/generator.js\";\nimport * as PremadeConfigs from \"./characters/premadeconfigs.js\";\nimport type Item from \"./equipment/item.js\";\nimport * as StockList from \"./equipment/stocklist.js\";\n\nexport class Merchant {\n  character: Character;\n  description: string;\n  wares: Item[];\n  priceVariance: number;\n\n  constructor(character: Character, description: string, wares: Item[], priceVariance: number) {\n    this.character = character;\n    this.description = description;\n    this.wares = wares;\n    this.priceVariance = priceVariance;\n  }\n}\n\nexport function generate(itemCategory: string, valueThreshold: number): Merchant {\n  let charGenConfig = PremadeConfigs.getFantasy();\n  charGenConfig.ageCategories = [\"adult\"];\n\n  const charGen = new CharacterGenerator(charGenConfig);\n  let character = charGen.generate();\n  let description = RND.item([\n    `${character.firstName} ${character.lastName} is ${\n      Words.article(\n        itemCategory,\n      )\n    } ${itemCategory} merchant.`,\n    `${character.firstName} ${character.lastName}, ${\n      Words.article(character.species.name)\n    } ${character.species.name} ${character.ageCategory.noun}, is ${\n      Words.article(itemCategory)\n    } ${itemCategory} merchant.`,\n  ]);\n  let wares = StockList.getList(itemCategory, 10, valueThreshold);\n  let priceVariance = random.float(0.8, 1.2);\n  if (priceVariance > 1.0) {\n    description += \" \" + Words.capitalize(character.gender.subjectivePronoun) + \" charges more than others.\";\n  } else if (priceVariance < 1.0) {\n    description += \" \" + Words.capitalize(character.gender.subjectivePronoun) + \" charges less than others.\";\n  }\n\n  return new Merchant(character, description, wares, priceVariance);\n}\n","\"use strict\";\n\nimport * as Components from \"./components/components.js\";\nimport * as Equipment from \"./equipment.js\";\nimport type Item from \"./item.js\";\n\nexport function getList(category: string, amount: number, valueThreshold: number): Item[] {\n  let components = Components.all();\n\n  let items = Equipment.generate(category, components, amount, valueThreshold);\n\n  return items;\n}\n","\"use strict\";\n\nimport * as RND from \"@ironarachne/rng\";\nimport Component from \"./components/component.js\";\nimport type Item from \"./item.js\";\nimport * as Patterns from \"./patterns/patterns.js\";\n\nexport function generate(\n  category: string,\n  components: Component[],\n  amount: number,\n  valueThreshold: number,\n): Item[] {\n  let result = [];\n  let patterns = [];\n\n  if (category == \"general\") {\n    patterns = Patterns.all();\n  } else {\n    patterns = Patterns.forCategory(category);\n  }\n\n  for (let i = 0; i < amount; i++) {\n    let pattern = RND.item(patterns);\n    let item = pattern.complete(components, valueThreshold);\n    result.push(item);\n  }\n\n  return result;\n}\n"],"names":["Currency.convertCopper","Merchant.generate","StockList.getList","PremadeConfigs.getFantasy","Equipment.generate","Components.all","Patterns.forCategory","Patterns.all","generate"],"mappings":"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"}
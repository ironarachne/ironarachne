{"version":3,"file":"svg-s3AN6Opa.js","sources":["../../../../src/lib/heraldry/renderers/svg.ts"],"sourcesContent":["import * as RND from \"@ironarachne/rng\";\nimport type Device from \"../device.js\";\n\nexport default class HeraldrySVGRenderer {\n  render(device: Device, width: number, height: number): string {\n    const shieldWidth = 600;\n    const shieldHeight = 660;\n\n    const uid = RND.randomString(4);\n\n    const shieldSVG =\n      `<path fill=\"url(#Division${uid})\" stroke=\"#000000\" stroke-width=\"3\" d=\"M3,3 V260.637C3,369.135,46.339,452.459,99.763,514 C186.238,614.13,300,657,300,657 C300,657,413.762,614.13,500.237,514 C553.661,452.459,597,369.135,597,260.637V3Z\"/>`;\n\n    const svgHeader =\n      `<svg width=\"${width}\" height=\"${height}\" viewBox=\"0 0 ${shieldWidth} ${shieldHeight}\" xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\">`;\n    let defsSVG = \"\";\n\n    defsSVG += device.field.pattern\n      .replaceAll(\"variation\", `variation${uid}`)\n      .replaceAll(\"Division\", `Division${uid}`);\n\n    for (let i = 0; i < device.field.variations.length; i++) {\n      for (let j = 0; j < device.field.variations[i].tinctures.length; j++) {\n        defsSVG += device.field.variations[i].tinctures[j].pattern;\n      }\n      let pattern = device.field.variations[i].renderSVGPattern();\n      pattern = pattern.replaceAll(\"variation\", `variation${uid}` + (i + 1));\n      defsSVG += pattern;\n    }\n\n    let chargeGroupsSVG = \"\";\n\n    for (let i = 0; i < device.chargeGroups.length; i++) {\n      chargeGroupsSVG += device.chargeGroups[i].renderSVG(shieldWidth, shieldHeight); // TODO: handle different centerPosition and arrangement\n    }\n\n    let svg = svgHeader;\n\n    svg += `<defs>${defsSVG}</defs>`;\n    svg += shieldSVG;\n    svg += chargeGroupsSVG;\n    svg += \"</svg>\";\n\n    return svg.replace(/<\\?xml.*\\?>/g, \"\");\n  }\n}\n"],"names":[],"mappings":";;;AAGA,MAAA,mBAAA,CAAA;AAAA,EAAyC,MAAzC,CAAyC,MAAzC,EAAyC,KAAzC,EAAyC,MAAzC,EAAyC;AAErC,IAAJ,MAAI,WAAJ,GAAI,GAAJ,CAAA;AACI,IAAJ,MAAI,YAAJ,GAAI,GAAJ,CAAA;AAEI,IAAJ,MAAI,GAAJ,GAAI,GAAJ,CAAI,YAAJ,CAAI,CAAA,CAAJ,CAAA;AAEI,IAAJ,MAAI,SAAJ,GAAI,CAAJ,yBAAA,EAAI,GAAA,CAAJ,4MAAA,CAAA,CAAA;AAGI,IAAJ,MAAI,SAAJ,GAAI,CAAJ,YAAA,EAAI,KAAA,CAAJ,UAAA,EAAI,MAAA,CAAJ,eAAA,EAAI,WAAA,CAAJ,CAAA,EAAI,YAAA,CAAJ,mDAAA,CAAA,CAAA;AAEI,IAAJ,IAAI,OAAJ,GAAI,EAAJ,CAAA;AAEI,IAAJ,OAAA,IAAI,MAAJ,CAAI,KAAJ,CAAI,OAAJ,CAAI,UAAJ,CAAI,WAAJ,EAAI,CAAJ,SAAA,EAAI,GAAA,CAAJ,CAAI,CAAJ,CAAI,UAAJ,CAAI,UAAJ,EAAI,CAAJ,QAAA,EAAI,GAAA,CAAJ,CAAI,CAAJ,CAAA;AAII,IAAJ,KAAA,IAAI,CAAJ,GAAI,CAAJ,EAAI,CAAJ,GAAI,MAAJ,CAAI,KAAJ,CAAI,UAAJ,CAAI,MAAJ,EAAI,CAAJ,EAAA,EAAI;AACE,MAAN,KAAA,IAAM,CAAN,GAAM,CAAN,EAAM,CAAN,GAAM,MAAN,CAAM,KAAN,CAAM,UAAN,CAAM,CAAA,CAAN,CAAM,SAAN,CAAM,MAAN,EAAM,CAAN,EAAA,EAAM;AACE,QAAR,OAAA,IAAQ,MAAR,CAAQ,KAAR,CAAQ,UAAR,CAAQ,CAAA,CAAR,CAAQ,SAAR,CAAQ,CAAA,CAAR,CAAQ,OAAR,CAAA;AAAQ,OAAR;AAEM,MAAN,IAAM,OAAN,GAAM,MAAN,CAAM,KAAN,CAAM,UAAN,CAAM,CAAA,CAAN,CAAM,gBAAN,EAAA,CAAA;AACM,MAAN,OAAA,GAAM,OAAN,CAAM,UAAN,CAAM,WAAN,EAAM,CAAN,SAAA,EAAM,GAAA,CAAN,CAAA,IAAM,CAAN,GAAM,CAAN,CAAM,CAAN,CAAA;AACM,MAAN,OAAA,IAAM,OAAN,CAAA;AAAM,KAAN;AAGI,IAAJ,IAAI,eAAJ,GAAI,EAAJ,CAAA;AAEI,IAAJ,KAAA,IAAI,CAAJ,GAAI,CAAJ,EAAI,CAAJ,GAAI,MAAJ,CAAI,YAAJ,CAAI,MAAJ,EAAI,CAAJ,EAAA,EAAI;AACE,MAAN,eAAA,IAAM,MAAN,CAAM,YAAN,CAAM,CAAA,CAAN,CAAM,SAAN,CAAM,WAAN,EAAM,YAAA,CAAN,CAAA;AAAM,KAAN;AAGI,IAAJ,IAAI,GAAJ,GAAI,SAAJ,CAAA;AAEI,IAAJ,GAAA,IAAI,CAAJ,MAAA,EAAI,OAAA,CAAJ,OAAA,CAAA,CAAA;AACI,IAAJ,GAAA,IAAI,SAAJ,CAAA;AACI,IAAJ,GAAA,IAAI,eAAJ,CAAA;AACI,IAAJ,GAAA,IAAI,QAAJ,CAAA;AAEI,IAAJ,OAAI,GAAJ,CAAI,OAAJ,CAAI,cAAJ,EAAI,EAAA,CAAJ,CAAA;AAAI,GAAJ;AAEA;;;;"}
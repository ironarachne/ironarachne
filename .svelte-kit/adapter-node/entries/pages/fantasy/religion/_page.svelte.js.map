{"version":3,"file":"_page.svelte.js","sources":["../../../../../../../src/routes/fantasy/religion/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n  import { getContext } from 'svelte';\n  import * as MUN from \"@ironarachne/made-up-names\";\n  import * as RND from \"@ironarachne/rng\";\n  import * as CommonSpecies from \"$lib/species/common.js\";\n  import * as ReligionCategories from \"$lib/religion/categories/categories.js\";\n  import type Species from \"$lib/species/species\";\n  import random from \"random\";\n  import ReligionGenerator from \"$lib/religion/generator\";\n  import ReligionGeneratorConfig from \"$lib/religion/generatorconfig\";\n  import seedrandom from \"seedrandom\";\n  import type Culture from '$lib/culture/culture';\n\n  const user = getContext('user');\n\n  let humanNameGenSet = new MUN.HumanSet();\n  let savedCulture: string;\n  let useSavedCulture: boolean = false;\n  let culture: Culture;\n\n  let seed = RND.randomString(13);\n  random.use(seedrandom(seed));\n  let genConfig = new ReligionGeneratorConfig();\n  let generator = new ReligionGenerator(genConfig);\n  let religion = generator.generate();\n  let allSpeciesNames: string[] = [];\n  const allSpecies = CommonSpecies.sentient();\n  const allReligionCategories = ReligionCategories.all();\n  let allReligionCategoriesNames: string[] = [];\n\n  for (let i = 0; i < allSpecies.length; i++) {\n    allSpeciesNames.push(allSpecies[i].name);\n  }\n\n  for (let i = 0; i < allReligionCategories.length; i++) {\n    allReligionCategoriesNames.push(allReligionCategories[i].name);\n  }\n\n  let selectedSpecies: string[] = [\"human\"];\n  let selectedCategories: string[] = [\"polytheism\"];\n\n  function generate() {\n    random.use(seedrandom(seed));\n    if (humanNameGenSet.family === null) {\n      throw new Error(\"Name set does not have a family name generator.\")\n    }\n    if (humanNameGenSet.female === null) {\n      throw new Error(\"Name set does not have a female name generator.\")\n    }\n    if (humanNameGenSet.male === null) {\n      throw new Error(\"Name set does not have a male name generator.\")\n    }\n    let speciesOptions: Species[] = [];\n    for (let i=0;i<selectedSpecies.length;i++) {\n      speciesOptions.push(CommonSpecies.byName(selectedSpecies[i], allSpecies));\n    }\n\n    let categoryOptions = [];\n    for (let i=0;i<selectedCategories.length;i++) {\n      categoryOptions.push(ReligionCategories.byName(selectedCategories[i], allReligionCategories));\n    }\n\n    generator.config.deitySpeciesOptions = speciesOptions;\n    generator.config.categories = categoryOptions;\n    generator.config.nameGenerator = humanNameGenSet.family;\n    generator.config.femaleNameGenerator = humanNameGenSet.female;\n    generator.config.maleNameGenerator = humanNameGenSet.male;\n\n    if (useSavedCulture) {\n      loadSavedCulture();\n\n      if (culture.generatorSet.family !== null) {\n        generator.config.nameGenerator = culture.generatorSet.family;\n      }\n      if (culture.generatorSet.female !== null) {\n        generator.config.femaleNameGenerator = culture.generatorSet.female;\n      }\n      if (culture.generatorSet.male !== null) {\n        generator.config.maleNameGenerator = culture.generatorSet.male;\n      }\n    } else {\n      generator.config.nameGenerator = humanNameGenSet.family;\n      generator.config.femaleNameGenerator = humanNameGenSet.female;\n      generator.config.maleNameGenerator = humanNameGenSet.male;\n    }\n\n    religion = generator.generate();\n  }\n\n  function loadSavedCulture() {\n    for (let i = 0; i < user.savedCultures.length; i++) {\n      if (user.savedCultures[i].name === savedCulture) {\n        culture = user.savedCultures[i];\n      }\n    }\n  }\n\n  function newSeed() {\n    seed = RND.randomString(13);\n    generate();\n  }\n</script>\n\n<style lang=\"scss\">\n  @import \"$lib/styles/reset.scss\";\n  @import \"$lib/styles/main.scss\";\n  @import '$lib/styles/global.scss';\n  @import '$lib/styles/fantasy.scss';\n\n  .input-group {\n    ul > li {\n      list-style: none;\n    }\n  }\n</style>\n\n<svelte:head>\n  <title>Religion Generator | Iron Arachne</title>\n</svelte:head>\n\n<section class=\"fantasy main\">\n  <h1>Fantasy Religion Generator</h1>\n\n  <p>Generate a fictional fantasy religion.</p>\n\n  <div class=\"input-group\">\n    <label for=\"seed\">Random Seed</label>\n    <input type=\"text\" name=\"seed\" bind:value={seed} id=\"seed\" />\n  </div>\n\n  <div class=\"input-group\">\n    <label for=\"selected-categories\">Allow these religion categories</label>\n    {#each allReligionCategoriesNames as categoryName}\n    <ul>\n      <li><input type=\"checkbox\" name=\"selected-categories\" bind:group={selectedCategories} id=\"selected-categories\" value={categoryName} /> {categoryName}</li>\n    </ul>\n    {/each}\n  </div>\n\n  <div class=\"input-group\">\n    <label for=\"selected-species\">Allow deities of these species</label>\n    {#each allSpeciesNames as speciesName}\n    <ul>\n      <li><input type=\"checkbox\" name=\"selected-species\" bind:group={selectedSpecies} id=\"selected-species\" value={speciesName} /> {speciesName}</li>\n    </ul>\n    {/each}\n  </div>\n\n  {#if user.savedCultures !== undefined && user.savedCultures.length > 0}\n  <div class=\"input-group\">\n    <label for=\"useSavedCulture\">Use a saved culture for naming?</label>\n    <input type=\"checkbox\" name=\"useSavedCulture\" bind:checked={useSavedCulture} id=\"useSavedCulture\" />\n  </div>\n\n  <div class=\"input-group\">\n    <label for=\"savedCulture\">Select a saved culture to load</label>\n    <select bind:value={savedCulture}>\n      {#each user.savedCultures as saved}\n      <option value={saved.name}>{ saved.name }</option>\n      {/each}\n    </select>\n  </div>\n  {/if}\n\n  <button on:click={generate}>Generate From Seed</button>\n  <button on:click={newSeed}>Random Seed (and Generate)</button>\n\n  <h2>{religion.name}</h2>\n\n  <p>{religion.description}</p>\n\n  <h3>Realms</h3>\n\n  {#each religion.realms as realm}\n    <div>\n      <h4>{realm.name}</h4>\n      <p>{realm.description}</p>\n    </div>\n  {/each}\n\n  {#if religion.pantheon !== null}\n  <h3>Deities</h3>\n\n  <p>{religion.pantheon.description}</p>\n\n  {#each religion.pantheon.members as member}\n    <div>\n      <h4>{member.deity.name}</h4>\n\n      <p>{member.deity.titles.join(\",\")}</p>\n\n      <p><strong>Holy Item:</strong> {member.deity.holyItem}</p>\n      <p><strong>Holy Symbol:</strong> {member.deity.holySymbol}</p>\n\n      <p>{member.deity.description}</p>\n    </div>\n  {/each}\n  {/if}\n</section>\n"],"names":["CommonSpecies.sentient","ReligionCategories.all"],"mappings":";;;;;;;;;;;;;AAaQ,QAAA,OAAO,WAAW,MAAM;AAE1B,MAAsB,IAAI,SAAA;MAE1B,kBAA2B;MAG3B,OAAO,IAAI,aAAa,EAAE;AAC9B,SAAO,IAAI,WAAW,IAAI,CAAA;MACtB,YAAgB,IAAA;AAChB,MAAA,YAAA,IAAgB,kBAAkB,SAAS;AAC3C,MAAA,WAAW,UAAU;AACrB,MAAA,kBAAA,CAAA;AACE,QAAA,aAAaA;AACb,QAAA,wBAAwBC;AAC1B,MAAA,6BAAA,CAAA;WAEK,IAAI,GAAG,IAAI,WAAW,QAAQ,KAAA;AACrC,oBAAgB,KAAK,WAAW,CAAC,EAAE,IAAI;AAAA;WAGhC,IAAI,GAAG,IAAI,sBAAsB,QAAQ,KAAA;AAChD,+BAA2B,KAAK,sBAAsB,CAAC,EAAE,IAAI;AAAA;AAG3D,MAAA,kBAAA,CAA6B,OAAO;AACpC,MAAA,qBAAA,CAAgC,YAAY;;AAwFH,SAAA,GAAA,SAAA,QAAA,oCAAA,SAAA,QAAA,oDAAA,EAAA,mCAAA,EAAA,ibAAA,cAAA,SAAA,8LAKpC,4BAA0B,kBAAA;qKAEuF,cAAY,CAAA,CAAA,0BAAA,CAAhE,mBAAkB,QAAkC,YAAY,sDAAM,YAAY,CAAA;AAAA,qLAO/I,iBAAe,iBAAA;+JAEyF,aAAW,CAAA,CAAA,0BAAA,CAAzD,gBAAe,QAA+B,WAAW,sDAAM,WAAW,CAAA;AAAA,cAKxI,KAAK,kBAAkB,UAAa,KAAK,cAAc,SAAS,4RAGP,iBAAe,CAAA,CAAA,wMAAA,KAMlE,KAAK,eAAa,WAAA;AACV,WAAA,UAAA,cAAA,SAAA,MAAM,MAAQ,CAAA,CAAA,IAAA,OAAA,MAAM,IAAI,CAAA;AAAA,4PAStC,SAAS,IAAI,CAEd,mCAAA,OAAA,SAAS,WAAW,CAAA,6EAAA,KAIjB,SAAS,QAAM,WAAA;AAEb,WAAA,0DAAA,OAAA,MAAM,IAAI,CACX,mCAAA,OAAA,MAAM,WAAW,CAAA;AAAA,QAIpB,SAAS,aAAa,kHAGvB,SAAS,SAAS,WAAW,cAE1B,SAAS,SAAS,SAAO,YAAA;AAEvB,WAAA,0DAAA,OAAA,OAAO,MAAM,IAAI,CAElB,mCAAA,OAAA,OAAO,MAAM,OAAO,KAAK,GAAG,CAAA,CAAA,oHAAA,OAEA,OAAO,MAAM,QAAQ,CAAA,qHAAA,OACnB,OAAO,MAAM,UAAU,CAErD,kCAAA,OAAA,OAAO,MAAM,WAAW,CAAA;AAAA;;"}